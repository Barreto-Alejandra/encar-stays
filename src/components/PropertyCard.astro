---
import GaleriaCarrusel from './GaleriaCarrusel.jsx';

const { 
  titulo, 
  capacidad, 
  tipo, 
  descripcion, 
  etiqueta, 
  imagenes, 
  linkAirbnb, 
  numeroWhatsapp,
  tienePiscina = true
} = Astro.props;
---

<article class="bg-white rounded-xl shadow-lg hover:shadow-2xl transition-all border border-gray-100 overflow-hidden flex flex-col h-full">
  <div class="relative">
    <div class="absolute top-4 left-4 z-10 bg-primary text-white text-xs font-bold px-3 py-1 rounded-full uppercase shadow-sm">
      {etiqueta}
    </div>
    <GaleriaCarrusel client:visible imagenes={imagenes} />
  </div>

  <div class="p-6 flex flex-col flex-grow">
    <h3 class="text-xl font-bold text-dark mb-2">{titulo}</h3>
    
    <div class="flex flex-wrap gap-3 text-sm text-gray-500 mb-4 font-medium">
      <span class="flex items-center gap-1">ğŸ‘¥ {capacidad}</span>
      <span class="flex items-center gap-1">ğŸ  {tipo}</span>
      
      {tienePiscina ? (
        <span class="flex items-center gap-1 text-primary font-bold">ğŸ’§ Piscina</span>
      ) : (
        <span class="flex items-center gap-1 text-blue-600 font-bold">ğŸŒŠ Vista RÃ­o</span>
      )}
    </div>

    <p class="text-gray-600 text-sm mb-6 flex-grow leading-relaxed">
      {descripcion}
    </p>
    
    <div class="mt-auto flex flex-col md:flex-row gap-3 w-full">
    
      {linkAirbnb ? (
        <>
          <a 
            href={linkAirbnb} 
            target="_blank" 
            class="flex-1 group flex items-center justify-center gap-2 bg-[#0F172A] hover:bg-[#1e293b] text-white font-bold py-3 px-4 rounded-lg transition-colors duration-200 shadow-lg shadow-indigo-500/20"
          >
            <svg class="w-5 h-5 fill-current" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
              <path d="M29.524 22.279c-0.372-1.044-0.752-1.907-1.183-2.74l0.058 0.123v-0.038c-2.361-5.006-4.551-9.507-6.632-13.551l-0.139-0.204c-1.483-3.040-2.544-4.866-5.627-4.866-3.049 0-4.344 2.118-5.667 4.871l-0.101 0.2c-2.086 4.044-4.275 8.551-6.627 13.555v0.066l-0.699 1.525c-0.262 0.63-0.396 0.96-0.431 1.058-0.279 0.691-0.441 1.492-0.441 2.332 0 3.526 2.859 6.385 6.385 6.385 0.020 0 0.040-0 0.060-0l-0.003 0c0.117-0 0.232-0.012 0.342-0.036l-0.011 0.002h0.465c2.744-0.574 5.073-2.061 6.71-4.121l0.018-0.024c1.656 2.082 3.983 3.568 6.65 4.132l0.075 0.013h0.465c0.099 0.021 0.214 0.034 0.331 0.034h0c0.017 0 0.038 0 0.059 0 3.526 0 6.384-2.858 6.384-6.384 0-0.84-0.162-1.642-0.457-2.376l0.015 0.043zM27.999 25.266c-0.262 1.581-1.309 2.87-2.719 3.467l-0.030 0.011c-2.815 1.225-5.602-0.729-7.988-3.379 3.945-4.937 4.674-8.782 2.98-11.269-0.887-1.289-2.353-2.123-4.015-2.123-0.080 0-0.159 0.002-0.237 0.006l0.011-0c-0.023-0-0.049-0.001-0.076-0.001-2.816 0-5.098 2.282-5.098 5.098 0 0.583 0.098 1.142 0.278 1.664l-0.011-0.036c0.782 2.574 2.032 4.8 3.665 6.686l-0.019-0.023c-0.978 1.128-2.103 2.094-3.352 2.879l-0.062 0.036c-0.657 0.387-1.43 0.657-2.256 0.758l-0.029 0.003c-0.186 0.027-0.401 0.043-0.62 0.043-2.474 0-4.48-2.006-4.48-4.48 0-0.599 0.117-1.17 0.33-1.692l-0.011 0.030c0.165-0.431 0.494-1.225 1.056-2.451l0.031-0.066c1.829-3.971 4.051-8.485 6.604-13.49l0.066-0.165 0.725-1.395c0.348-0.857 0.932-1.559 1.672-2.043l0.017-0.010c0.425-0.248 0.935-0.395 1.48-0.395 0.027 0 0.054 0 0.081 0.001l-0.004-0c1.024 0.009 1.933 0.497 2.514 1.251l0.006 0.008c0.197 0.299 0.431 0.696 0.727 1.191l0.697 1.361 0.1 0.199c2.551 5.004 4.775 9.507 6.597 13.489l0.033 0.031 0.666 1.525 0.397 0.955c0.199 0.493 0.314 1.065 0.314 1.664 0 0.232-0.017 0.46-0.051 0.683l0.003-0.025zM16.001 23.841c-1.367-1.544-2.407-3.411-2.991-5.47l-0.024-0.099c-0.126-0.348-0.198-0.749-0.198-1.167 0-0.711 0.21-1.372 0.57-1.927l-0.008 0.014c0.543-0.803 1.45-1.325 2.479-1.325 0.060 0 0.12 0.002 0.18 0.005l-0.008-0c0.052-0.003 0.112-0.005 0.173-0.005 1.030 0 1.938 0.525 2.469 1.323l0.007 0.011c0.351 0.538 0.56 1.196 0.56 1.904 0 0.422-0.074 0.826-0.211 1.201l0.008-0.024c-0.624 2.155-1.661 4.019-3.029 5.588l0.015-0.017z"></path>
            </svg>
            <span>Reservar</span>
          </a>

          <button 
            onclick={`window.open('https://wa.me/${numeroWhatsapp}?text=Hola, me interesa reservar ${titulo}', '_blank')`}
            class="flex-1 group flex items-center justify-center gap-2 border-2 border-[#25D366] text-[#25D366] hover:bg-[#25D366] hover:text-white font-bold py-3 px-4 rounded-lg transition-all duration-200 cursor-pointer"
          >
            <svg class="w-5 h-5 fill-current" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6z"/></svg>
            <span>Consultar</span>
          </button>
        </>
      ) : (
        <button 
          onclick={`window.open('https://wa.me/${numeroWhatsapp}?text=Hola, quiero que me avisen cuando estÃ© lista: ${titulo} ğŸ””', '_blank')`}
          class="w-full group flex items-center justify-center gap-2 bg-slate-600 hover:bg-slate-700 text-white font-bold py-3 px-4 rounded-lg transition-all duration-200 shadow-md cursor-pointer"
        >
          <span class="text-xl">ğŸ””</span>
          <span>AvÃ­same cuando estÃ© lista</span>
        </button>
      )}

    </div>
  </div>
</article>